在上一篇文章[《什么是数据库？》](https://juejin.cn/book/7372468023183343628/section/7385137745607262217 "https://juejin.cn/book/7372468023183343628/section/7385137745607262217")中，我们详细探讨了数据库的基本概念，重点介绍了传统数据库和 Coze 数据库的区别。我们了解到，Coze 数据库凭借其独特的自然语言交互、灵活权限管理、与聊天机器人的无缝结合等优势，极大地降低了数据管理的门槛。

本文将在上一篇的基础上，进一步讨论如何在 Coze 平台上更好地利用数据库的定制化记忆能力。

作为广大的 AI 智能体爱好者，无论是否有技术基础，你可能也还在思考：Coze 数据库如何在实际工作和生活中帮助我？我该如何利用 Coze 数据库实现自己的应用创意？不用担心，这篇文章将通过几个具体的应用案例，手把手教你掌握 Coze 数据库的最佳实践，让你轻松成为数据驱动的 AI 智能体应用开发者。

## Coze 数据库的应用场景剖析

在开始实践之前，让我们先再来分析一下 Coze 数据库适用的应用场景。通过梳理不同场景的需求特点，我们可以更好地理解 Coze 数据库的灵活性和普适性。

**个人生活管理场景**

在个人生活管理领域，我们经常面临各种琐碎数据的收集和处理，如日程安排、账单记录、阅读笔记等。以往，这些数据往往散落在不同的笔记本、App 中，很难进行系统的整理和分析。但现在，利用 Coze 数据库，你可以轻松地将这些数据进行结构化存储和管理。

* **日程管理**：创建一个包含`日期`、`时间`、`事项`、`重要性`等字段的`日程表`，你就可以用自然语言与数据库对话的方式来添加、查询、修改日程，让时间管理变得简单高效。
* **记账理财**：创建`收入表`和`支出表`，记录收支的各个维度如`类别`、`金额`、`时间`、`备注`等，Coze 数据库就像你的智能理财助手，能随时统计分析资金流向，助你实现财务自由。

**个人生活管理场景中，Coze 单用户数据库即可满足需求**。你可以放心地将个人数据存储在 Coze 平台，用自然语言的方式与数据亲密互动，让数字化管理渗透到生活的方方面面。

**多人互动场景**

Coze 平台上我们甚至可以通过数据库的多用户模式实现一些多人互动小游戏。与单机游戏不同，多人游戏需要在玩家之间实时同步数据，如玩家信息、游戏进度、排行榜等。利用 Coze 数据库，游戏开发者可以轻松构建实时的数据交互机制，打造丰富多彩的游戏玩法。

以一款多人游戏的 AI Bot 为例，我们可以设计如下几张核心数据表：

* `玩家信息表`：存储玩家的基本信息，如`玩家 ID`、`昵称`、`等级`、`经验值`等。
* `比赛记录表`：记录每场比赛的详细数据，如`比赛 ID`、`参与玩家`、`比赛结果`、`比赛时长`等。
* `排行榜表`：根据玩家的比赛表现，动态生成游戏排行榜，如`玩家 ID`、`排名`、`积分`等。

有了这些结构化的游戏数据，一个 AI Bot 就能实现丰富的游戏功能，如玩家匹配、比赛记录、排行榜展示等。

类似地，我们也可以创作一些多人社交互动应用场景，最典型的例子就是`漂流瓶`应用了。通过 Coze 数据库，我们可以创建`漂流瓶表`，存储每个漂流瓶的详细信息，如`漂流瓶 ID`、`内容`、`发送时间`、`接收者`等。用户可以通过自然语言与数据库交互，随时查看、发送、回复漂流瓶，体验一种全新的社交互动方式。

好的，既然我们已经探讨了 Coze 数据库的典型应用场景，接下来就让我们一起学习如何在 Coze 平台上实际使用数据库吧。

## 使用 Coze 数据库的步骤

### 第一步：创建数据库

在 Coze 平台上使用数据库的第一步，就是要创建属于自己的数据库。创建数据库非常简单，你只需要在与 AI 助手的对话中，用自然语言表达创建数据库的需求即可，例如：请帮我创建一个名为`我的任务清单`的数据库。

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9b125acc5f34ac983edad5193f24d8d~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=2378&h=1614&s=269372&e=png&a=1&b=f6f6f9)

这里要注意一下`支持在 Prompt 中调用`这个选项，我感觉大家都很容易忽略，这个选项是其实用来在对话中调用的，如果你**不勾选**这个选项，那么你在对话中就无法调用这个数据库了。只有当你对话时候，大模型调用了这个 AI Bot 中某个工作流，而且这个工作流刚好也有一些相关的数据库操作，那么这个数据库才允许被调用。

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8cb03821a5f34c1d889670e0732ad4c6~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=2418&h=1070&s=205533&e=png&a=1&b=f6f6f9)

### 第二步：设计表结构

有了数据库，我们接下来要做的就是设计表结构了。表结构决定了数据库中数据的组织方式，是数据库应用的基础。在 Coze 数据库中，**设计表结构其实也是通过与 AI 助手对话来完成的**。

以`我的任务清单`数据库为例，我们可以设计一张名为`任务表`的数据表，包含以下字段：

* 任务标题：任务的简短描述，如`完成周报`。
* 任务描述：任务的详细说明，如`总结本周工作内容，并提交给经理审阅`。
* 优先级：任务的重要程度，如`高`、`中`、`低`。
* 截止日期：任务的完成期限，如`2023-06-30`。
* 完成状态：标识任务是否已完成，如`已完成`、`未完成`。

我们可以用以下指令来创建这个任务表：

> 请在`我的任务清单`数据库中创建一张名为`任务表`的数据表，包含字段`任务标题`(文本)，`任务描述`(文本)，`优先级`(文本)，`截止日期`(日期)，`完成状态`(文本)，并将`任务标题`设置为必填字段。

就这样，通过简单的对话交互，我们就可以灵活地设计出符合自己需求的表结构了。

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75bb2ba648a44a0596349926946a5727~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=2364&h=1624&s=318273&e=png&a=1&b=f6f6f9)

这里补充说明一下表结构中的`数据类型`的含义，Coze 数据库目前支持的数据类型有：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11a571aa7dd8416aadf47f739c56c0f7~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=548\&h=730\&s=50100\&e=png\&a=1\&b=f1f1f4)

* String（文本）：用于存储文本信息，如任务标题、任务描述等。它可以包含字母、数字、符号和空格，是最常见的数据类型之一。
* Integer（整数）：用于存储整数信息（不支持小数点后的位数），如任务优先级。整数类型的数据在不涉及小数的情况下使用，如计数或编号。
* Time（时间）：用于存储日期和时间信息，如任务截止日期。时间类型的数据可以帮助我们追踪和管理时间相关的活动和事件。
* Number（数字）：用于存储数值信息（支持小数点后的位数），如任务完成进度。数字类型的数据适用于需要精确度的小数计算，例如金钱、比例或平均值。
* Boolean（布尔）：用于存储逻辑值，如任务完成状态。布尔类型的数据只有两个可能的值：真（true）或假（false），通常用于表示某个条件是否满足。

为什么需要有数据类型呢？

数据类型是编程语言和数据库中非常重要的概念，因为它们帮助我们确定每个数据元素的性质和用途。以下是几个主要原因：

* **内存分配**：不同的数据类型占用的内存空间不同。明确数据类型可以优化内存使用，提升程序性能。
* **数据验证**：通过指定数据类型，可以在数据输入时进行验证，确保数据的正确性。例如，用户输入年龄时，系统可以验证是否输入了整数。
* **操作便捷**：不同的数据类型支持不同的操作。例如，文本类型可以进行拼接和搜索，数值类型可以进行算术运算。
* **提高代码可读性**：明确的数据类型让代码更容易理解和维护。其他开发者可以更快地理解数据的用途和操作方式。
* **错误防范**：通过限定数据类型，可以防止不适当的数据操作和类型转换错误，增强代码的可靠性和安全性。

而每个数据表字段都有一个`是否必要`，这个字段是用来标识这个字段是否是必须填写的，如果是必填字段，那么在添加数据的时候，这个字段就必须填写，否则就会报错。毕竟有些时候，我们的数据表中有些字段是必须填写的，有些字段是可以不填写的。

### 第三步：添加数据

表结构设计完成后，就可以往表中添加具体的数据了。在 Coze 数据库中，我们可以用自然语言指令来实现数据的添加操作（**目前 Coze 的数据库暂不支持直接操作数据表手工添加和修改数据**）。

例如，我们要在`任务表`中添加一条任务数据，可以这样告诉 AI 助手：

```txt
请在`任务表`中添加一条数据，任务标题为`完成周报`，任务描述为`总结本周工作内容，并提交给经理审阅`，优先级为`高`，截止日期为`2023-06-30`，完成状态为`未完成`。
```

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f8fe96829194e9fbc91b6bae8913c99~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=966\&h=850\&s=175423\&e=png\&a=1\&b=ffffff)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4e78a5e7cc14317be28642c5420986f~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=2382&h=586&s=91427&e=png&a=1&b=f6f6f9)

如果你想一次性添加多条数据，也可以用类似的方式实现，如：

```txt
请在`任务表`中批量添加以下数据：
任务标题： 完成周报， 任务描述： 总结本周工作内容，并提交给经理审阅， 优先级： 高， 截止日期： 2023-06-30， 完成状态： 未完成；
任务标题： 准备会议材料， 任务描述： 制作下周项目会议的 PPT 材料， 优先级： 高， 截止日期： 2023-07-02， 完成状态： 未完成；
任务标题： 回复客户邮件， 任务描述： 及时回复客户关于产品售后服务的咨询邮件， 优先级： 中， 截止日期： 2023-07-04，完成状态： 未完成。
```

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d5601a6a749407abbfa86decd7640e5~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=978\&h=1420\&s=347205\&e=png\&a=1\&b=ffffff)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06c9301c73f846c281b580a72052fac9~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=2342&h=766&s=139066&e=png&a=1&b=f6f6f9)

### 第四步：查询和修改数据

数据添加完成后，我们就可以方便地进行数据的查询和修改操作了。

例如，我们要查询`任务表`中所有优先级为`高`的任务，可以这样告诉 AI 助手：

```txt
请查询`任务表`中所有优先级为`高`的任务数据。
```

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ada7a0776f354219bd47a26158a95a00~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=936\&h=976\&s=198959\&e=png\&a=1\&b=f5f5f8)

如果我们想修改某条任务数据，比如将任务`完成周报`的完成状态更新为`已完成`，可以这样告诉 AI 助手：

```txt
请将`任务表`中任务标题为`完成周报`的任务数据的完成状态更新为`已完成`。
```

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af4fa12eadfa4f14b0879bf5288165d0~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=986\&h=620\&s=109012\&e=png\&a=1\&b=ffffff)

对于数据的删除操作，也可以用类似的方式实现，这里就不再赘述了。

### 延伸玩法：数据分析和可视化

Coze 数据库最强大的功能在于，它可以利用 Coze 平台的其他强大功能，对数据进行智能分析和可视化展示。

比如，我们可以先在 Bot 编辑页面添加几个跟数据分析有关的插件，比如官方的`图表大师`：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8937d428a7534fe0866478ae708e02c7~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=994&h=588&s=80554&e=png&a=1&b=fcfcfc)

然后，我们就可以让 AI 助手基于`任务表`的数据，生成一份任务完成情况的分析说明出来：

```txt
请根据`任务表`的数据，分析我的任务完成情况，并生成一份任务完成情况分析报告。内容包括已完成任务数、未完成任务数、按优先级统计的任务分布等，以文字和图表的形式呈现。
```

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd0a320b4e6c4265a5b63fc79c5248c1~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=956\&h=1386\&s=272766\&e=png\&a=1\&b=f5f5f8)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b8ad9f3047f4f388fd69b51bf0af498~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=800\&h=600\&s=23947\&e=png\&b=ffffff)

## Coze 数据库的最佳实践

### 实践一：使用标准化的数据格式和明确的表结构

在使用 Coze 数据库时，我们要尝试遵循标准化的数据格式，并设计清晰明确的数据表结构。

具体来说，我们要做到：

* **统一数据类型**：对于同一类数据，要统一使用相同的数据类型，如日期类型统一使用 `YYYY-MM-DD` 格式，数值类型统一精度和单位等。
* **规范命名**：对表名、字段名进行规范化命名，遵循统一的命名规则，如使用下划线分隔多个单词，不使用保留字等。
* **表字段的默认值能否为空**：对于必填字段，要开启`是否必要`按钮，确保数据的完整性；对于可选字段，要思考值为空时的可行性，避免降低数据的可用性和整体功能的稳定性。

通过使用标准化的数据格式和明确的表结构，我们可以提高数据质量，减少数据不一致和冗余，为后续数据应用奠定良好基础。

### 实践二：将数据库操作封装在工作流中

Coze 数据库的一大特色在于它通过自然语言交互来操作数据。但是，过于灵活的交互方式可能会影响操作的稳定性。为此，我们可以将一系列标准的数据库操作封装在工作流中。

**大模型能力是一把双刃剑，好的一面是它可以理解用的自然语言并尝试识别出用户的意图，执行相应的操作。坏的一面是，当大模型的能力有限，或者用户的输入不够明确或者有歧义时，大模型可能会产生不准确的结果，导致操作失败甚至是失误。而工作流则是一种更加规范化、标准化的操作方式，可以帮助我们规避这些问题。**

比如，我们可以设计一个`添加新客户`的工作流，将相关的一些前提逻辑判定、创建客户记录、录入客户详情、关联其他数据等一系列操作固化下来，形成一个标准化的流程。用户提供相关信息时，大模型检测到相关意图并执行对应的工作流，按照工作流的流程填写操作相关信息，即可完成客户数据的录入，无需担心操作的正确性和完整性。

通过将数据库操作封装在工作流中，我们可以降低操作难度，减少人为错误，提高数据处理的效率和稳定性。同时，标准化、模板化的操作也更易于推广和复用。

### 实践三：明确 Coze 数据库的使用边界

目前，Coze 数据库已有的功能其实还是不够成熟的，从传统意义上，它还是一个“阉割版”的数据库，在功能和性能上还有不少局限性。因此，在使用 Coze 数据库时，我们要明确其适用的场景和边界。

对于一些临时性的、小规模的数据存储需求，我们可以直接使用 Coze 提供的`变量`功能。`变量`由开发者自行创建，可以灵活地应用于各种需要保存临时数据的场景。比如在进行即时对话时，用`变量`来保存用户输入的一些关键信息，方便在对话中多次引用。

当需要持久化保存一些用户相关的对话信息时，则可以使用 Coze 的`长期记忆`功能。`长期记忆`能自动记录并总结每个用户与 Bot 的对话内容，形成个性化的用户记忆。在为用户提供服务时，可以调用这些记忆信息，实现更加个性化的交互体验。

而对于需要存储和管理规模化的结构化业务数据时，我们可以尝试使用 Coze 数据库。考虑到 Coze 数据库在功能和性能上的局限性，建议将其用于数据量不大、查询分析需求不复杂的场景，如业务复杂度不高的数据存储。

对于数据安全性、一致性要求很高的核心业务系统，以及数据量很大、查询分析很频繁的场景，其实还是不建议使用 Coze 的数据库功能的。真要实现，我宁愿建议你在数据安全允许的情况，通过写一些自定义插件和工作流来远程调用获取甚至是操作你的业务数据。

此外，对于一些常用的知识信息，我们可以使用 Coze 知识库进行管理。知识库侧重于存储非结构化的文本知识，相对比较静态，主要用于支持知识检索和推荐等应用。将知识库和数据库、变量、记忆灵活组合，可以构建功能更全面的智能化应用。

## 总结

Coze 数据库作为 Coze 平台的一个重要组成部分，为 AI 智能体应用开发提供了实用的数据存储和管理能力。它基于自然语言交互，使得数据操作门槛大大降低。同时，它与 Coze 平台的工作流、变量、插件等功能深度集成，可以实现灵活多样的数据应用。

通过本文，我们重点探讨了如何在 Coze 平台上更好利用数据库的定制化记忆功能。我们先分析了 Coze 数据库的典型应用场景，包括个人生活管理、多人互动等，理解数据库在不同场景下扮演的角色。

接着，我们详细讲解了使用 Coze 数据库的具体步骤，包括：

1. **创建数据库**：通过自然语言表达创建数据库的需求。
2. **设计表结构**：通过对话交互设计符合需求的表结构。
3. **添加数据**：用自然语言指令实现数据的单条或批量添加。
4. **查询和修改数据**：用对话方式进行数据的查询、更新和删除操作。

我们还进一步探索了如何利用 Coze 平台的其他功能，对数据进行智能分析和可视化展示。

最后，我们总结了使用 Coze 数据库的几点最佳实践：

1. 使用**标准化的数据格式**和**明确的表结构**，提高数据质量。
2. 将**数据库操作封装在工作流**中，规范化操作过程，降低错误率。
3. **明确 Coze 数据库的使用边界**，小规模数据可用，大规模复杂数据谨慎使用。

此外，我们还提到可以将数据库与`变量`、`长期记忆`、`知识库`等 Coze 平台的其他存储能力灵活搭配，构建更加智能化的应用。