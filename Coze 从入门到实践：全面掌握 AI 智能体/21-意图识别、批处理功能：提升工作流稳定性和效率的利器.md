## 意图识别节点：让工作流更懂用户的需求

而说到人工智能，很多人脑海中浮现的可能是科幻电影里那些外表酷炫的机器人。但是在我们的日常生活中，人工智能早已无处不在，只是你可能没有意识到而已。当你在购物 App 上咨询客服时，那个秒回你消息的可能就是一个 AI 客服；当你对着手机说“我想听周杰伦的歌”时，语音助手能立即为你播放音乐，这背后也离不开人工智能技术的加持。

这些场景的共同点是什么？没错，都是在试图理解用户的意图，提供最精准的服务。而要让机器理解用户的意图，第一步就是要让机器具备“意图识别”的能力。在 Coze 工作流中，这个任务就交给了意图识别节点来完成。

### 功能与原理

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24f03561520d42a4930ce11419f62a3b~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=1028&h=1424&s=170169&e=png&a=1&b=f9f9f9)

在 Coze 工作流中，意图识别节点可以自动理解用户的真实需求，将用户的自然语言输入归类到预定义的意图分类中。这样，工作流就可以根据不同的意图，自动执行相应的处理逻辑，大大提升了人机交互的效率和准确性。

作为 Coze 平台的一大特色功能，意图识别节点拥有以下几个亮点：

1. **无需编程，可视化配置**：添加一个意图识别节点，只需要在节点配置面板中定义意图分类，填入各种意图的示例句，平台就会自动训练出意图识别模型，无需编写任何代码。

2. **多轮对话，上下文感知**：Coze 的意图识别不仅可以处理单轮对话，还支持多轮对话。通过勾上`Bot 对话历史`这个功能来分析上下文信息，即使用户在多轮对话中省略了某些关键信息，平台也可以合理地推断出用户的真实意图。

3. **灵活的人机协作方式**：对于意图识别置信度较低的用户输入，可以设置多轮澄清问题，进一步确认用户意图。对于无法识别的意图，可以转人工处理。灵活的人机协作方式，让机器和人可以发挥各自的长处。

下图是一个意图识别节点的配置示例，可以看到，在简单直观的界面中，就可以完成意图定义、分支逻辑设置等关键配置：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca1487b795f1486d90c907cb8d84143c~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=2498&h=1232&s=496540&e=png&b=f0f2f4)

这里要提醒一下，意图识别节点的输出就只有两个输出参数，分别是：

* `classificationId`，意图识别的分类 ID
* `reason`，意图识别分类的原因

具体的调用结果例子如下图：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a3f3193c7e34c72b464a62839e110c8~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=2608&h=1970&s=472164&e=png&a=1&b=f1f2f4)

Coze 工作流中的意图识别节点，让机器人可以准确理解用户的真实需求，进而提供个性化、多样化的服务，极大提升了人机交互体验。在客服、销售、问诊等场景中，意图识别可以说是不可或缺的关键功能。而 Coze 平台为开发者提供了一种零门槛、可视化的方式来实现意图识别，让更多的行业和领域可以轻松享受到人工智能带来的红利。

#### 典型应用场景介绍

在这里，我就先简单介绍几个典型的应用场景，看看意图识别在实际应用中是如何发挥作用的：

**智能客服** - 在客服场景中，意图识别可以自动将用户咨询的问题分类，比如账号问题、物流问题、售后问题等，进而转交给对应的处理模块或人工客服，大大提高了服务效率。同时，意图识别还可以自动识别客户情绪，对负面情绪进行安抚。

**医疗问诊** - 对于在线医疗咨询的场景，意图识别可以帮助医生快速判断患者的主诉症状，自动推荐相关的检查项目和治疗方案，辅助医生进行初步诊断，提高问诊效率。意图识别还可以通过对患者的描述进行分析，评估病情的轻重缓急，对于危重症状及时预警。

### 配置意图识别节点

在 Coze 工作流中，添加一个意图识别节点也不难，只需要简单的几步配置：

1. **定义意图匹配**：列出你的业务场景中可能出现的几类核心意图，如`咨询产品信息`、`申请退换货`等。
2. **添加分支逻辑**：针对不同的意图分类，设置对应的处理分支。比如识别为退换货意图的，后续流程就走退换货处理子流程。
3. **优化模型效果**：在意图识别节点的配置面板中，你可以通过`高级设置`添加各种意图的示例句，这些句子就好比是教科书，可以让意图识别模型学得更好。同时，你还可以在模型判断出的意图置信度不高时，添加一些澄清问题，进一步确认用户意图。

下图是一个意图识别节点的配置示例：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/006384c6d02a469fb77e54beb82ee65f~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=694&h=1068&s=105799&e=png&b=f9f9f9)

### 一个客服机器人的意图识别工作流示例

让我们来看一个实际的客服机器人工作流，它利用意图识别节点，将用户问题自动分类，并流转至不同的处理节点：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12caac76543a457fa44f3e7a1e06588b~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=3678&h=2730&s=936008&e=png&a=1&b=f9f9f9)

在这个工作流中：

1. 用户的输入首先经过意图识别节点，被归类为产品咨询或订单问题等不同意图；
2. 对于识别为产品咨询的意图，后续流转到产品知识库节点，通过知识库问答来解决；
3. 对于识别为订单问题的意图，后续流转到订单知识库节点，查询订单信息并给出解答；
4. 对于没有匹配到任何意图分类的，统一给出默认答复，引导用户进一步描述问题或人工转接；

这就是一个非常典型的基于意图识别的客服机器人工作流。引入意图识别后，工作流`懂`用户需求了，变得更加智能，服务质量和效率也大幅提升。

其实意图识别节点也是最近 Coze 平台刚刚新推出的一个新的工作流节点，在此之前，如果我们要想在工作流实现类似意图识别的功能的话，可以就要使用`大模型`节点 + `选择器`节点来实现，这样的方式相对来说比较繁琐，需要你预设好大模型的意图识别提示词，还有限定特定的输出格式和内容，再让后续的`选择器`节点来匹配对应的结果来处理，不够直观。而现在有了意图识别节点，我们就可以更加方便快捷地实现意图识别的功能了。

## 批处理功能：高效处理多项任务的利器

在现实工作中，我们经常会遇到需要重复处理大量同类型任务的场景。比如，一个电商平台要批量生成每个商品的推荐语，一个数据分析师要统计过去一年每个季度的销售额，一个运营专员要给上万用户发送促销短信。这些任务虽然简单，但数量巨大，如果都靠人工一项一项操作，效率低不说，还极易出错。

这时候就需要批处理功能来救场了。简单来说，批处理就是一次性处理大量的数据或任务，而不需要人工干预。它就好比我们生活中的`批发`，通过打包处理，可以大幅提高效率，节省时间。

那怎么知道一个工作流节点是否支持批处理呢？只需要看节点右上角的图标，有类似写着`批处理`的选项，就说明这个节点支持批处理了：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6eb405a1a5e74a31ac699a83e5fa2bc8~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=1826&h=2210&s=295443&e=png&a=1&b=fafafa)

在 Coze 工作流中，批处理功能可以说是一个大杀器，它允许你将某个节点的任务批量执行，自动化地完成重复性工作。引入批处理后，工作流的能力和效率可以得到快速的提升：

1. **效率爆表**：传统的工作流每次只能处理一项任务，而**批处理的每个节点任务可以一次性处理最多 200 次的数据，并发运行次数最多 10 次**。这意味着是什么呢？假设你有一个处理任务，在一次工作流程中需要执行`200`次，然后你每执行一次需要耗时`1`秒钟的时间，那就要等待`200`秒钟。而如果使用批处理功能，你选择并发运行次数为`10`，那么只需要`20`秒钟就能得到结果，效率提升了`10`倍。这样一来，处理大量数据的任务可以在短时间内完成，效率大大提升。

2. **实时性高**：很多场景下，任务结果的实时性很重要，比如要第一时间响应客户的咨询，或者防止 AI Bot 在回答问题时因处理流程过于复杂，导致等待超时等等。批处理可以在短时间内重复处理更多任务，满足实时性需求。

### 如何使用批处理功能

目前在 Coze 的工作流中，只有以下工作流节点是支持`批处理`操作的：

1. 大模型节点
2. 插件节点
3. 工作流节点
4. 图像流节点

很遗憾的是，代码节点目前还不支持批处理操作。不过，你可以通过在代码节点中编写循环来实现类似批处理的效果。

而当支持的工作流节点选择了批处理操作后，你会发现节点配置中会多了一个`批处理`选项，如下图：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f0e8cb6610c4dd19e13a7ac80793eae~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=3942&h=2726&s=897776&e=png&a=1&b=fafafa)

前面提及到的相关批处理配置项，都在那个齿轮的图标下，你可以根据自己的需求来设置：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cad78d3788ba46d1a56173e7f2017bcd~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=1680&h=710&s=109362&e=png&a=1&b=f6f6f9)

**批处理模式下节点会多次运行，在每一次运行中，批处理列表将按照顺序将列表中的一项赋值给批处理变量，直到达到批处理上限或列表最大长度**。那这又意味着什么呢？**这代表着`批处理`模式下的每个参数都一定是一个数组的数据类型**，就比如下图的例子：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f599da59b564ce899c821f4d2481c28~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=3766&h=2348&s=659340&e=png&a=1&b=fafafa)

这里还有一点需要注意的是，`批处理`模式下的节点，其输入参数中的参数值如果需要引用`批处理`数组变量的元素，需要如下图的配置来引用：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8eec77ad9bb434b8b25d25ca51fdaa4~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=4066&h=2364&s=749456&e=png&a=1&b=fafafa)

这里可能大家有点困惑，我这里举个例子来说明一下。比如上述图中，开始节点的输入变量`questions`有以下具体的值：

```json
{
  "questions": ["你好吗？", "你吃了吗？", "你在干嘛？"]
}
```

那这个值经过`批处理`模式下的参数`questions`引用之后，再给其下对应的输入变量`question`，就会变成如下的值：

```json
{
  "question": "你好吗？"
}
```

当然，这只是整个批处理中的一个元素，后续还会有其他元素的值，以此类推，最后我们来看看整个批处理流程的调试结果：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d5c6ddc696514700aa3bfd1781a3f0c4~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.png#?w=3936&h=2478&s=953351&e=png&a=1&b=f0f2f4)

这样，我们就完成了一个批处理的工作流程。这只是一个简单的例子，实际应用中，你可以根据自己的需求来设计更复杂的批处理工作流程。

## 总结

本文介绍了**意图识别节点**和**批处理功能**在 Coze 工作流中的应用。意图识别节点能够自动化理解用户的自然语言输入，将其归类为预定义的意图，从而帮助系统提供更加个性化的服务。这个功能特别适用于智能客服和医疗问诊等场景，可以提高服务效率和准确性。

**在使用意图识别节点时，只需定义意图分类并添加示例句，系统即可自动训练出模型**。它还支持引用多轮的对话历史作为参考，能够分析上下文信息，使得与用户的交互更加自然。此外，**对于无法确定的意图，还可以通过多轮澄清问题或人工处理来确保准确性**。

另一方面，**批处理功能则是处理大量重复性任务的高效工具**。在支持批处理的节点上，可以一次性处理大量数据，显著提升任务完成的速度和实时性。特别是在需要快速响应的场景中，批处理功能显得尤为重要。

这些功能使得 Coze 工作流能够更智能地理解和响应用户需求，提升了整体的工作效率和服务质量。无论是开发者还是用户，都能从中受益，体验到更加高效、智能的服务。

## 参考资料

* [Coze 意图识别节点](https://www.coze.cn/docs/guides/intent_recognition_node "https://www.coze.cn/docs/guides/intent_recognition_node")